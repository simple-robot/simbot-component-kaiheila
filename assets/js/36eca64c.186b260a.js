"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[274],{5162:(t,e,n)=>{n.d(e,{Z:()=>i});var a=n(7294),o=n(6010);const r={tabItem:"tabItem_Ymn6"};function i(t){let{children:e,hidden:n,className:i}=t;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r.tabItem,i),hidden:n},e)}},4866:(t,e,n)=>{n.d(e,{Z:()=>w});var a=n(7462),o=n(7294),r=n(6010),i=n(2466),l=n(6550),s=n(1980),u=n(7392),p=n(12);function c(t){return function(t){return o.Children.map(t,(t=>{if(!t||(0,o.isValidElement)(t)&&function(t){const{props:e}=t;return!!e&&"object"==typeof e&&"value"in e}(t))return t;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof t.type?t.type:t.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(t).map((t=>{let{props:{value:e,label:n,attributes:a,default:o}}=t;return{value:e,label:n,attributes:a,default:o}}))}function m(t){const{values:e,children:n}=t;return(0,o.useMemo)((()=>{const t=e??c(n);return function(t){const e=(0,u.l)(t,((t,e)=>t.value===e.value));if(e.length>0)throw new Error(`Docusaurus error: Duplicate values "${e.map((t=>t.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(t),t}),[e,n])}function b(t){let{value:e,tabValues:n}=t;return n.some((t=>t.value===e))}function k(t){let{queryString:e=!1,groupId:n}=t;const a=(0,l.k6)(),r=function(t){let{queryString:e=!1,groupId:n}=t;if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,s._X)(r),(0,o.useCallback)((t=>{if(!r)return;const e=new URLSearchParams(a.location.search);e.set(r,t),a.replace({...a.location,search:e.toString()})}),[r,a])]}function d(t){const{defaultValue:e,queryString:n=!1,groupId:a}=t,r=m(t),[i,l]=(0,o.useState)((()=>function(t){let{defaultValue:e,tabValues:n}=t;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!b({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((t=>t.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=n.find((t=>t.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:e,tabValues:r}))),[s,u]=k({queryString:n,groupId:a}),[c,d]=function(t){let{groupId:e}=t;const n=function(t){return t?`docusaurus.tab.${t}`:null}(e),[a,r]=(0,p.Nk)(n);return[a,(0,o.useCallback)((t=>{n&&r.set(t)}),[n,r])]}({groupId:a}),v=(()=>{const t=s??c;return b({value:t,tabValues:r})?t:null})();(0,o.useLayoutEffect)((()=>{v&&l(v)}),[v]);return{selectedValue:i,selectValue:(0,o.useCallback)((t=>{if(!b({value:t,tabValues:r}))throw new Error(`Can't select invalid tab value=${t}`);l(t),u(t),d(t)}),[u,d,r]),tabValues:r}}var v=n(2389);const T={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function g(t){let{className:e,block:n,selectedValue:l,selectValue:s,tabValues:u}=t;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),m=t=>{const e=t.currentTarget,n=p.indexOf(e),a=u[n].value;a!==l&&(c(e),s(a))},b=t=>{let e=null;switch(t.key){case"Enter":m(t);break;case"ArrowRight":{const n=p.indexOf(t.currentTarget)+1;e=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(t.currentTarget)-1;e=p[n]??p[p.length-1];break}}e?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},e)},u.map((t=>{let{value:e,label:n,attributes:i}=t;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===e?0:-1,"aria-selected":l===e,key:e,ref:t=>p.push(t),onKeyDown:b,onClick:m},i,{className:(0,r.Z)("tabs__item",T.tabItem,i?.className,{"tabs__item--active":l===e})}),n??e)})))}function y(t){let{lazy:e,children:n,selectedValue:a}=t;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const t=r.find((t=>t.props.value===a));return t?(0,o.cloneElement)(t,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((t,e)=>(0,o.cloneElement)(t,{key:e,hidden:t.props.value!==a}))))}function N(t){const e=d(t);return o.createElement("div",{className:(0,r.Z)("tabs-container",T.tabList)},o.createElement(g,(0,a.Z)({},t,e)),o.createElement(y,(0,a.Z)({},t,e)))}function w(t){const e=(0,v.Z)();return o.createElement(N,(0,a.Z)({key:String(e)},t))}},3469:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>m,contentTitle:()=>p,default:()=>v,frontMatter:()=>u,metadata:()=>c,toc:()=>b});var a=n(7462),o=(n(7294),n(3905)),r=n(4866),i=n(5162),l=n(614),s=n(2965);const u={title:"\u4f7f\u7528\u6807\u51c6\u5e93",sidebar_position:2},p=void 0,c={unversionedId:"quick-start/stdlib",id:"quick-start/stdlib",title:"\u4f7f\u7528\u6807\u51c6\u5e93",description:"stdlib\u6807\u51c6\u5e93\u6a21\u5757\u57fa\u4e8e KMP \u6784\u5efa\u9879\u76ee\uff0c\u652f\u6301 JVM\u3001JS\u3001Native \u5e73\u53f0\uff0c\u4f7f\u7528 Ktor \u4f5c\u4e3aAPI\u8bf7\u6c42\uff08http\u8bf7\u6c42\uff09\u548c\u4e8b\u4ef6\u8ba2\u9605\uff08WS\u8fde\u63a5\uff09\u7684\u89e3\u51b3\u65b9\u6848\u3002",source:"@site/docs/quick-start/stdlib.md",sourceDirName:"quick-start",slug:"/quick-start/stdlib",permalink:"/simbot-component-kook/docs/quick-start/stdlib",draft:!1,editUrl:"https://github.com/simple-robot/simbot-component-kook/tree/dev/main/website/docs/quick-start/stdlib.md",tags:[],version:"current",lastUpdatedAt:1694010938,formattedLastUpdatedAt:"2023\u5e749\u67086\u65e5",sidebarPosition:2,frontMatter:{title:"\u4f7f\u7528\u6807\u51c6\u5e93",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528API\u6a21\u5757",permalink:"/simbot-component-kook/docs/quick-start/api"},next:{title:"\u4f7f\u7528simbot\u6838\u5fc3\u5e93",permalink:"/simbot-component-kook/docs/quick-start/simbot-core"}},m={},b=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u6784\u5efaBOT\u3001\u8ba2\u9605\u4e8b\u4ef6",id:"\u6784\u5efabot\u8ba2\u9605\u4e8b\u4ef6",level:3},{value:"\u4f7f\u7528BOT\u8bf7\u6c42API",id:"\u4f7f\u7528bot\u8bf7\u6c42api",level:3}],k={toc:b},d="wrapper";function v(t){let{components:e,...n}=t;return(0,o.kt)(d,(0,a.Z)({},k,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"stdlib\u6807\u51c6\u5e93\u6a21\u5757\u57fa\u4e8e ",(0,o.kt)("strong",{parentName:"p"},"KMP")," \u6784\u5efa\u9879\u76ee\uff0c\u652f\u6301 ",(0,o.kt)("strong",{parentName:"p"},"JVM\u3001JS\u3001Native")," \u5e73\u53f0\uff0c\u4f7f\u7528 ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/"},(0,o.kt)("strong",{parentName:"a"},"Ktor"))," \u4f5c\u4e3aAPI\u8bf7\u6c42\uff08http\u8bf7\u6c42\uff09\u548c\u4e8b\u4ef6\u8ba2\u9605\uff08WS\u8fde\u63a5\uff09\u7684\u89e3\u51b3\u65b9\u6848\u3002"),(0,o.kt)("p",null,"\u6807\u51c6\u5e93\u6a21\u5757\u662f",(0,o.kt)("strong",{parentName:"p"},"\u72ec\u7acb\u7684"),"\uff0c\u5b9e\u8d28\u4e0a\u5e76\u4e0d\u4f9d\u8d56 simbot API\u3002\u4f60\u53ef\u4ee5\u5355\u72ec\u4f7f\u7528\u5b83\u4f5c\u4e3a ",(0,o.kt)("a",{parentName:"p",href:"https://developer.kookapp.cn/doc/"},"KOOK API")," \u4e0e\u4e8b\u4ef6\u8ba2\u9605\u80fd\u529b\u7684\u5e95\u5c42\u5c01\u88c5\u5e93\u3002"),(0,o.kt)("p",null,"\u6807\u51c6\u5e93\u6a21\u5757\u4f9d\u8d56API\u6a21\u5757\u3002"),(0,o.kt)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1. \u5b89\u88c5 kook-stdlib \u4f9d\u8d56")),(0,o.kt)(r.Z,{groupId:"use-dependency",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"Gradle Kotlin DSL",attributes:{"data-value":"Kts"},mdxType:"TabItem"},(0,o.kt)(l.Z,{language:"kotlin",mdxType:"CodeBlock"},`\n// \u4e0d\u8981\u5fd8\u8bb0\u4f7f\u7528 Gradle \u7684 kotlin \u63d2\u4ef6\u6765\u5141\u8bb8\u81ea\u52a8\u9009\u62e9\u5bf9\u5e94\u5e73\u53f0\uff0c\u6bd4\u5982JVM\u6216JS\u7b49\u3002\nimplementation("love.forte.simbot.component:simbot-component-kook-stdlib:${s.i}") // \u7248\u672c\u53c2\u8003\u4e0b\u6587\u6240\u8ff0\u7684 Releases\n`.trim())),(0,o.kt)(i.Z,{value:"Gradle Groovy",attributes:{"data-value":"Gradle"},mdxType:"TabItem"},(0,o.kt)(l.Z,{language:"gradle",mdxType:"CodeBlock"},`\n// \u4e0d\u8981\u5fd8\u8bb0\u4f7f\u7528 Gradle \u7684 kotlin \u63d2\u4ef6\u6765\u5141\u8bb8\u81ea\u52a8\u9009\u62e9\u5bf9\u5e94\u5e73\u53f0\uff0c\u6bd4\u5982JVM\u6216JS\u7b49\u3002\nimplementation 'love.forte.simbot.component:simbot-component-kook-stdlib:${s.i}' // \u7248\u672c\u53c2\u8003\u4e0b\u6587\u6240\u8ff0\u7684 Releases\n`.trim())),(0,o.kt)(i.Z,{value:"Maven",attributes:{"data-value":"Maven"},mdxType:"TabItem"},(0,o.kt)(l.Z,{language:"xml",mdxType:"CodeBlock"},`\n<dependency>\n<groupId>love.forte.simbot.component</groupId>\n\x3c!-- \u5728Maven\u4e2d\u4f7f\u7528 '-jvm' \u540e\u7f00\u6765\u9009\u62e9\u4f7f\u7528JVM\u5e73\u53f0\u5e93 --\x3e\n<artifactId>simbot-component-kook-stdlib-jvm</artifactId>\n\x3c!-- \u7248\u672c\u53c2\u8003\u4e0b\u6587\u6240\u8ff0\u7684 Releases --\x3e\n<version>${s.i}</version>\n</dependency>\n`.trim()))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2. \u9009\u62e9\u5e76\u5b89\u88c5\u5408\u9002\u7684 Ktor Client \u4f9d\u8d56")),(0,o.kt)("p",null,"\u524d\u5f80 ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html"},"Ktor: HTTP client Engines")," \u9009\u62e9\u5e76\u4f7f\u7528\u4e00\u4e2a\u5408\u9002\u7684 HTTP Client \u5f15\u64ce\u3002"),(0,o.kt)("admonition",{title:"\u9650\u5236\u6761\u4ef6",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"\u6ce8\u610f:")," \u4f60\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u652f\u6301",(0,o.kt)("strong",{parentName:"p"},"HTTP 1.1"),"\u548c",(0,o.kt)("strong",{parentName:"p"},"WS Client"),"\u7684\u5f15\u64ce\u3002\u90e8\u5206\u5f15\u64ce\u53ef\u80fd\u4ec5\u80fd\u652f\u6301\u5176\u4e2d\u4e00\u4e2a\uff08\u4f8b\u5982\u4e0d\u652f\u6301WS Client\uff09\u3002"),(0,o.kt)("p",{parentName:"admonition"},"\u5404\u5f15\u64ce\u5b9e\u73b0\u7684\u9650\u5236\u53ef\u53c2\u8003 ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#limitations"},"Ktor\u6587\u6863"),"\u3002")),(0,o.kt)("p",null,"\u4f8b\u5982\uff1a"),(0,o.kt)(r.Z,{groupId:"use-dependency",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"Gradle Kotlin DSL",label:"Kotlin/JVM",attributes:{"data-value":"Kts"},mdxType:"TabItem"},(0,o.kt)("p",null,"\u4ee5 ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#cio"},(0,o.kt)("inlineCode",{parentName:"a"},"CIO"))," \u5f15\u64ce\u4e3a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6216\u4f7f\u7528 runtimeOnly\nimplementation("io.ktor:ktor-client-cio:<\u5408\u9002\u4e14\u8f83\u65b0\u7684Ktor\u7248\u672c>")\n')),(0,o.kt)("p",null,"\u6216\u8005\u5982\u679c Java \u7248\u672c ",(0,o.kt)("inlineCode",{parentName:"p"},">= Java11"),", \u53ef\u4ee5\u4f7f\u7528 ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#java"},(0,o.kt)("inlineCode",{parentName:"a"},"Java"))," \u5f15\u64ce\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6216\u4f7f\u7528 runtimeOnly\nimplementation("io.ktor:ktor-client-java:<\u5408\u9002\u4e14\u8f83\u65b0\u7684Ktor\u7248\u672c>")\n'))),(0,o.kt)(i.Z,{value:"Kotlin/JS",label:"Kotlin/JS",attributes:{"data-value":"Kts"},mdxType:"TabItem"},(0,o.kt)("p",null,"\u4ee5 ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#js"},(0,o.kt)("inlineCode",{parentName:"a"},"JS"))," \u5f15\u64ce\u4e3a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'implementation("io.ktor:ktor-client-js:<\u5408\u9002\u4e14\u8f83\u65b0\u7684Ktor\u7248\u672c>")\n'))),(0,o.kt)(i.Z,{value:"Kotlin/N",label:"Kotlin/Native",attributes:{"data-value":"Kts"},mdxType:"TabItem"},(0,o.kt)(r.Z,{groupId:"use-dependency-kt-native",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"WinHttp",label:"WinHttp",mdxType:"TabItem"},(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"see ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#winhttp"},(0,o.kt)("inlineCode",{parentName:"a"},"WinHttp")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'implementation("io.ktor:ktor-client-winhttp:<\u5408\u9002\u4e14\u8f83\u65b0\u7684Ktor\u7248\u672c>")\n'))),(0,o.kt)(i.Z,{value:"Darwin",label:"Darwin",mdxType:"TabItem"},(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"see ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#darwin"},(0,o.kt)("inlineCode",{parentName:"a"},"Darwin")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'implementation("io.ktor:ktor-client-darwin:<\u5408\u9002\u4e14\u8f83\u65b0\u7684Ktor\u7248\u672c>")\n'))),(0,o.kt)(i.Z,{value:"CIO",label:"CIO",mdxType:"TabItem"},(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"see ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#cio"},(0,o.kt)("inlineCode",{parentName:"a"},"CIO")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'implementation("io.ktor:ktor-client-cio:<\u5408\u9002\u4e14\u8f83\u65b0\u7684Ktor\u7248\u672c>")\n'))))),(0,o.kt)(i.Z,{value:"Maven",attributes:{"data-value":"Maven"},mdxType:"TabItem"},(0,o.kt)("p",null,"\u4ee5 ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#cio"},(0,o.kt)("inlineCode",{parentName:"a"},"CIO"))," \u5f15\u64ce\u4e3a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},"\n<dependency>\n    <groupId>io.ktor</groupId>\n    <artifactId>ktor-client-cio-jvm</artifactId>\n    <version>\u5408\u9002\u4e14\u8f83\u65b0\u7684Ktor\u7248\u672c</version>\n    \x3c!-- \u5728JVM\u5e73\u53f0\u4e0b\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u5f15\u64ce\u4f9d\u8d56\uff0c\u5219\u9ed8\u8ba4\u4f1a\u5c1d\u8bd5\u901a\u8fc7 SPI \u52a0\u8f7d\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528 runtime \u4f5c\u7528\u57df --\x3e\n    \x3c!-- \u5982\u679c\u60f3\u8981\u624b\u52a8\u6307\u5b9a\u5f15\u64ce\u6216\u914d\u7f6e\uff0c\u79fb\u9664\u6b64\u4f5c\u7528\u57df\u914d\u7f6e --\x3e\n    <scope>runtime</scope>\n</dependency>\n")),(0,o.kt)("p",null,"\u6216\u8005\u5982\u679c Java \u7248\u672c ",(0,o.kt)("inlineCode",{parentName:"p"},">= Java11"),", \u53ef\u4ee5\u4f7f\u7528 ",(0,o.kt)("a",{parentName:"p",href:"https://ktor.io/docs/http-client-engines.html#java"},(0,o.kt)("inlineCode",{parentName:"a"},"Java"))," \u5f15\u64ce\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},"\n<dependency>\n    <groupId>io.ktor</groupId>\n    <artifactId>ktor-client-java</artifactId>\n    <version>\u5408\u9002\u4e14\u8f83\u65b0\u7684Ktor\u7248\u672c</version>\n    \x3c!-- \u5728JVM\u5e73\u53f0\u4e0b\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u5f15\u64ce\u4f9d\u8d56\uff0c\u5219\u9ed8\u8ba4\u4f1a\u5c1d\u8bd5\u901a\u8fc7 SPI \u52a0\u8f7d\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528 runtime \u4f5c\u7528\u57df --\x3e\n    \x3c!-- \u5982\u679c\u60f3\u8981\u624b\u52a8\u6307\u5b9a\u5f15\u64ce\u6216\u914d\u7f6e\uff0c\u79fb\u9664\u6b64\u4f5c\u7528\u57df\u914d\u7f6e --\x3e\n    <scope>runtime</scope>\n</dependency>\n")))),(0,o.kt)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,o.kt)("h3",{id:"\u6784\u5efabot\u8ba2\u9605\u4e8b\u4ef6"},"\u6784\u5efaBOT\u3001\u8ba2\u9605\u4e8b\u4ef6"),(0,o.kt)(r.Z,{groupId:"code",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"Kotlin",label:"Kotlin/JVM",attributes:{"data-value":"Kotlin"},mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6784\u5efa\u4e00\u4e2a bot\nval bot = BotFactory.create(Ticket.botWsTicket(clientId = "CLIENT_ID", token = "TOKEN")) {\n    // bot\u76f8\u5173\u7684\u914d\u7f6e, \u4f8b\u5982\uff1a\n    // \u914d\u7f6ebot\u8fdb\u884cclient\u8bf7\u6c42\u548cws\u8fde\u63a5\u65f6\u4f7f\u7528\u7684Ktor\u5f15\u64ce\n    // JVM\u5e73\u53f0\u4e0b\uff0c\u9ed8\u8ba4\u4e0d\u914d\u7f6e\u5219\u4f1a\u5c1d\u8bd5\u81ea\u52a8\u52a0\u8f7d\u73af\u5883\u4e2d\u53ef\u80fd\u5b58\u5728\u7684\u5f15\u64ce\n    clientEngineFactory = CIO\n    wsEngineFactory = CIO\n\n    // \u662f\u5426\u542f\u7528 compress, \u9ed8\u8ba4\u4e3atrue\n    isCompress = true\n\n    // \u7981\u7528API\u8bf7\u6c42\u65f6\u7684\u8d85\u65f6\u914d\u7f6e\n    disableTimeout()\n\n    // \u6216\u8005\u81ea\u5b9a\u4e49\u8d85\u65f6\u914d\u7f6e\n    timeout {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 5000L\n    }\n\n    // \u4ee5\u53ca\u5176\u4ed6...\n}\n\n// \u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u5668\nbot.processor { raw ->\n    // this: Event<*>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("raw:   $raw")\n}\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7684 extra \u8ba2\u9605\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u7684\u4e8b\u4ef6\nbot.processor<TextExtra> { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("extra: $extra")\n    println("raw:   $raw")\n}\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7c7b\u578b Event.Type \u7684\u67d0\u4e2a\u503c\u8ba2\u9605\u4e0e\u4e4b\u5339\u914d\u7684\u4e8b\u4ef6\nbot.processor(Event.Type.KMARKDOWN) { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002this.event \u4e0e Type \u53c2\u6570\u5339\u914d\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("type:  $type")\n    println("raw:   $raw")\n}\n\n// \u53ef\u4ee5\u67e5\u8be2bot\u81ea\u8eab\u7684\u4fe1\u606f\nval me = bot.me()\nprintln("me: $me")\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 start \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// bot.join() \u4f1a\u6302\u8d77\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\n// startAndJoin() \u7ec4\u5408\u4e86 start() \u548c join()\nbot.startAndJoin()\n')),(0,o.kt)("p",null,"\u4e00\u4e2a\u7b80\u5316\u7248\u7684\u793a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6784\u5efabot\n// \u9700\u8981\u786e\u4fddruntime\u73af\u5883\u4e2d\u6709\u53ef\u7528\u7684ktor\u5f15\u64ce\uff0c\u4e14\u540c\u65f6\u652f\u6301HTTP\u548cws client\nval bot = BotFactory.create(Ticket.botWsTicket(clientId = "CLIENT_ID", token = "TOKEN"))\n\n// \u8ba2\u9605\u67d0\u4e2a\u5177\u4f53\u4e8b\u4ef6\nbot.processor<TextExtra> { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("extra: $extra")\n    println("raw:   $raw")\n}\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 start \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// bot.join() \u4f1a\u6302\u8d77\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\n// startAndJoin() \u7ec4\u5408\u4e86 start() \u548c join()\nbot.startAndJoin()\n'))),(0,o.kt)(i.Z,{value:"Kotlin/JS",attributes:{"data-value":"Kotlin"},mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6784\u5efa\u4e00\u4e2a bot\nval bot = BotFactory.create(Ticket.botWsTicket(clientId = "CLIENT_ID", token = "TOKEN")) {\n    // bot\u76f8\u5173\u7684\u914d\u7f6e, \u4f8b\u5982\uff1a\n    // \u914d\u7f6ebot\u8fdb\u884cclient\u8bf7\u6c42\u548cws\u8fde\u63a5\u65f6\u4f7f\u7528\u7684Ktor\u5f15\u64ce\n    // JS\u5e73\u53f0\u4e0b\uff0c\u9ed8\u8ba4\u4f1a\u4f9d\u8d56ktor-js\uff08\u56e0\u4e3ajs\u5e73\u53f0\u4f3c\u4e4e\u6ca1\u522b\u7684\u53ef\u9009\uff09\uff0c\u56e0\u6b64\u6b64\u5904\u53ef\u4ee5\u7701\u7565\n    clientEngineFactory = Js\n    wsEngineFactory = Js\n\n    // \u662f\u5426\u542f\u7528 compress\n    // JS \u5e73\u53f0\u4e0b\u9ed8\u8ba4\u4e3a **false**\n    // JS \u5e73\u53f0\u652f\u6301\u5f00\u542f compress, \u4f46\u662f\u53ef\u80fd\u4e0d\u591f\u7a33\u5b9a\uff0c\u56e0\u6b64\u5982\u679c\u975e\u5fc5\u8981\uff0c\u53ef\u4ee5\u4e0d\u7528\u5f00\u542f\u3002\n    isCompress = false\n\n    // \u7981\u7528API\u8bf7\u6c42\u65f6\u7684\u8d85\u65f6\u914d\u7f6e\n    disableTimeout()\n\n    // \u6216\u8005\u81ea\u5b9a\u4e49\u8d85\u65f6\u914d\u7f6e\n    timeout {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 5000L\n    }\n\n    // \u4ee5\u53ca\u5176\u4ed6...\n}\n\n// \u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u5668\nbot.processor { raw ->\n    // this: Event<*>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("raw:   $raw")\n}\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7684 extra \u8ba2\u9605\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u7684\u4e8b\u4ef6\nbot.processor<TextExtra> { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("extra: $extra")\n    println("raw:   $raw")\n}\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7c7b\u578b Event.Type \u7684\u67d0\u4e2a\u503c\u8ba2\u9605\u4e0e\u4e4b\u5339\u914d\u7684\u4e8b\u4ef6\nbot.processor(Event.Type.KMARKDOWN) { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002this.event \u4e0e Type \u53c2\u6570\u5339\u914d\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("type:  $type")\n    println("raw:   $raw")\n}\n\n// \u53ef\u4ee5\u67e5\u8be2bot\u81ea\u8eab\u7684\u4fe1\u606f\nval me = bot.me()\nprintln("me: $me")\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 start \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// bot.join() \u4f1a\u6302\u8d77\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\n// startAndJoin() \u7ec4\u5408\u4e86 start() \u548c join()\nbot.startAndJoin()\n')),(0,o.kt)("p",null,"\u4e00\u4e2a\u7b80\u5316\u7248\u7684\u793a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6784\u5efabot\nval bot = BotFactory.create(Ticket.botWsTicket(clientId = "CLIENT_ID", token = "TOKEN"))\n\n// \u8ba2\u9605\u67d0\u4e2a\u5177\u4f53\u4e8b\u4ef6\nbot.processor<TextExtra> { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("extra: $extra")\n    println("raw:   $raw")\n}\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 start \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// bot.join() \u4f1a\u6302\u8d77\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\n// startAndJoin() \u7ec4\u5408\u4e86 start() \u548c join()\nbot.startAndJoin()\n'))),(0,o.kt)(i.Z,{value:"Kotlin/Native",attributes:{"data-value":"Kotlin"},mdxType:"TabItem"},(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6b64\u5904\u4ee5 ",(0,o.kt)("inlineCode",{parentName:"p"},"MingwX64")," \u5e73\u53f0\u73af\u5883\u4e3a\u4f8b\uff1a")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6784\u5efa\u4e00\u4e2a bot\nval bot = BotFactory.create(Ticket.botWsTicket(clientId = "CLIENT_ID", token = "TOKEN")) {\n    // bot\u76f8\u5173\u7684\u914d\u7f6e, \u4f8b\u5982\uff1a\n    // \u914d\u7f6ebot\u8fdb\u884cclient\u8bf7\u6c42\u548cws\u8fde\u63a5\u65f6\u4f7f\u7528\u7684Ktor\u5f15\u64ce\n    // \u4e0d\u540c\u7684native\u5e73\u53f0\u8bf7\u6ce8\u610f\u9009\u62e9\u5408\u9002\u7684\u5f15\u64ce\n    clientEngineFactory = WinHttp\n    wsEngineFactory = WinHttp\n\n    // \u662f\u5426\u542f\u7528 compress\n    // native \u5e73\u53f0\u4e0b\u9ed8\u8ba4\u4e3a **false**, \u4e14 **\u4e0d\u652f\u6301** \u5f00\u542f\u3002\n    // isCompress = false\n\n    // \u7981\u7528API\u8bf7\u6c42\u65f6\u7684\u8d85\u65f6\u914d\u7f6e\n    disableTimeout()\n\n    // \u6216\u8005\u81ea\u5b9a\u4e49\u8d85\u65f6\u914d\u7f6e\n    timeout {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 5000L\n    }\n\n    // \u4ee5\u53ca\u5176\u4ed6...\n}\n\n// \u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u5668\nbot.processor { raw ->\n    // this: Event<*>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("raw:   $raw")\n}\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7684 extra \u8ba2\u9605\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u7684\u4e8b\u4ef6\nbot.processor<TextExtra> { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("extra: $extra")\n    println("raw:   $raw")\n}\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7c7b\u578b Event.Type \u7684\u67d0\u4e2a\u503c\u8ba2\u9605\u4e0e\u4e4b\u5339\u914d\u7684\u4e8b\u4ef6\nbot.processor(Event.Type.KMARKDOWN) { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002this.event \u4e0e Type \u53c2\u6570\u5339\u914d\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("type:  $type")\n    println("raw:   $raw")\n}\n\n// \u53ef\u4ee5\u67e5\u8be2bot\u81ea\u8eab\u7684\u4fe1\u606f\nval me = bot.me()\nprintln("me: $me")\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 start \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// bot.join() \u4f1a\u6302\u8d77\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\n// startAndJoin() \u7ec4\u5408\u4e86 start() \u548c join()\nbot.startAndJoin()\n')),(0,o.kt)("p",null,"\u4e00\u4e2a\u7b80\u5316\u7248\u7684\u793a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6784\u5efabot\nval bot = BotFactory.create(Ticket.botWsTicket(clientId = "CLIENT_ID", token = "TOKEN")) {\n    // \u914d\u7f6ebot\u8fdb\u884cclient\u8bf7\u6c42\u548cws\u8fde\u63a5\u65f6\u4f7f\u7528\u7684Ktor\u5f15\u64ce\n    // \u4e0d\u540c\u7684native\u5e73\u53f0\u8bf7\u6ce8\u610f\u9009\u62e9\u5408\u9002\u7684\u5f15\u64ce\n    clientEngineFactory = WinHttp\n    wsEngineFactory = WinHttp\n}\n\n// \u8ba2\u9605\u67d0\u4e2a\u5177\u4f53\u4e8b\u4ef6\nbot.processor<TextExtra> { raw ->\n    // this: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    println("event: $this")\n    println("extra: $extra")\n    println("raw:   $raw")\n}\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 start \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// bot.join() \u4f1a\u6302\u8d77\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\n// startAndJoin() \u7ec4\u5408\u4e86 start() \u548c join()\nbot.startAndJoin()\n'))),(0,o.kt)(i.Z,{value:"Java",attributes:{"data-value":"Java"},mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'// \u51c6\u5907Ticket\nfinal var ticket = Ticket.botWsTicket("CLIENT_ID", "TOKEN");\n\n// \u51c6\u5907bot\u914d\u7f6e\nfinal var botConfiguration = new BotConfiguration();\n// bot\u76f8\u5173\u7684\u914d\u7f6e, \u4f8b\u5982\uff1a\n\n// \u914d\u7f6ebot\u8fdb\u884cclient\u8bf7\u6c42\u548cws\u8fde\u63a5\u65f6\u4f7f\u7528\u7684Ktor\u5f15\u64ce\n// JVM\u5e73\u53f0\u4e0b\uff0c\u9ed8\u8ba4\u4e0d\u914d\u7f6e\u5219\u4f1a\u5c1d\u8bd5\u81ea\u52a8\u52a0\u8f7d\u73af\u5883\u4e2d\u53ef\u80fd\u5b58\u5728\u7684\u5f15\u64ce\nbotConfiguration.setClientEngineFactory(CIO.INSTANCE);\nbotConfiguration.setWsEngineFactory(CIO.INSTANCE);\n\n// \u662f\u5426\u542f\u7528 compress, \u9ed8\u8ba4\u4e3atrue\nbotConfiguration.setCompress(true);\n\n// \u7981\u7528API\u8bf7\u6c42\u65f6\u7684\u8d85\u65f6\u914d\u7f6e\nbotConfiguration.disableTimeout();\n\n// \u6216\u8005\u81ea\u5b9a\u4e49\u8d85\u65f6\u914d\u7f6e\nfinal var timeoutConfiguration = new BotConfiguration.TimeoutConfiguration();\ntimeoutConfiguration.setRequestTimeoutMillis(5000L);\ntimeoutConfiguration.setConnectTimeoutMillis(5000L);\nbotConfiguration.setTimeout(timeoutConfiguration);\n\n// \u4ee5\u53ca\u5176\u4ed6...\n\n// \u6784\u5efabot\nfinal var bot = BotFactory.create(ticket, botConfiguration);// botConfiguration \u4e5f\u53ef\u7701\u7565\uff0c\u5982\u679c\u90fd\u7528\u9ed8\u8ba4\u7684\u8bdd\n\n// \u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u5668\nbot.blockingProcessor((event, raw) -> {\n    // event: Event<*>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    System.out.println("event = " + event);\n    System.out.println("raw = " + raw);\n});\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7684 extra \u8ba2\u9605\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u7684\u4e8b\u4ef6\nbot.blockingProcessor(TextExtra.class, (event, raw) -> {\n    // event: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    System.out.println("event = " + event);\n    System.out.println("event.getExtra() = " + event.getExtra());\n    System.out.println("raw = " + raw);\n});\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7c7b\u578b Event.Type \u7684\u67d0\u4e2a\u503c\u8ba2\u9605\u4e0e\u4e4b\u5339\u914d\u7684\u4e8b\u4ef6\nbot.blockingProcessor(Event.Type.KMARKDOWN, (event, raw) -> {\n    // event: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002this.event \u4e0e Type \u53c2\u6570\u5339\u914d\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    System.out.println("event = " + event);\n    System.out.println("event.getType() = " + event.getType());\n    System.out.println("raw = " + raw);\n});\n\n// \u53ef\u4ee5\u67e5\u8be2bot\u81ea\u8eab\u7684\u4fe1\u606f\nfinal var me = bot.getMe();\nSystem.out.println("me = " + me);\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 startBlocking \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// startAndJoin() \u7ec4\u5408\u4e86 start() \u548c join()\nbot.startBlocking();\n\n// bot.joinBlocking() \u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\nbot.joinBlocking();\n')),(0,o.kt)("p",null,"\u4e00\u4e2a\u7b80\u5316\u7248\u7684\u793a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'// \u51c6\u5907Ticket\nfinal var ticket = Ticket.botWsTicket("CLIENT_ID", "TOKEN");\n\n// \u6784\u5efabot\nfinal var bot = BotFactory.create(ticket);// botConfiguration \u4e5f\u53ef\u7701\u7565\uff0c\u5982\u679c\u90fd\u7528\u9ed8\u8ba4\u7684\u8bdd\n\n// \u8ba2\u9605\u67d0\u4e2a\u5177\u4f53\u4e8b\u4ef6\nbot.blockingProcessor(TextExtra.class, (event, raw) -> {\n    // event: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    System.out.println("event = " + event);\n    System.out.println("event.getExtra() = " + event.getExtra());\n    System.out.println("raw = " + raw);\n});\n\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 startBlocking \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\nbot.startBlocking();\n\n// bot.joinBlocking() \u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\nbot.joinBlocking();\n'))),(0,o.kt)(i.Z,{value:"Java Async",attributes:{"data-value":"Java"},mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'// \u51c6\u5907Ticket\nfinal var ticket = Ticket.botWsTicket("CLIENT_ID", "TOKEN");\n\n// \u51c6\u5907bot\u914d\u7f6e\nfinal var botConfiguration = new BotConfiguration();\n// bot\u76f8\u5173\u7684\u914d\u7f6e, \u4f8b\u5982\uff1a\n\n// \u914d\u7f6ebot\u8fdb\u884cclient\u8bf7\u6c42\u548cws\u8fde\u63a5\u65f6\u4f7f\u7528\u7684Ktor\u5f15\u64ce\n// JVM\u5e73\u53f0\u4e0b\uff0c\u9ed8\u8ba4\u4e0d\u914d\u7f6e\u5219\u4f1a\u5c1d\u8bd5\u81ea\u52a8\u52a0\u8f7d\u73af\u5883\u4e2d\u53ef\u80fd\u5b58\u5728\u7684\u5f15\u64ce\nbotConfiguration.setClientEngineFactory(CIO.INSTANCE);\nbotConfiguration.setWsEngineFactory(CIO.INSTANCE);\n\n// \u662f\u5426\u542f\u7528 compress, \u9ed8\u8ba4\u4e3atrue\nbotConfiguration.setCompress(true);\n\n// \u7981\u7528API\u8bf7\u6c42\u65f6\u7684\u8d85\u65f6\u914d\u7f6e\nbotConfiguration.disableTimeout();\n\n// \u6216\u8005\u81ea\u5b9a\u4e49\u8d85\u65f6\u914d\u7f6e\nfinal var timeoutConfiguration = new BotConfiguration.TimeoutConfiguration();\ntimeoutConfiguration.setRequestTimeoutMillis(5000L);\ntimeoutConfiguration.setConnectTimeoutMillis(5000L);\nbotConfiguration.setTimeout(timeoutConfiguration);\n\n// \u4ee5\u53ca\u5176\u4ed6...\n\n// \u6784\u5efabot\nfinal var bot = BotFactory.create(ticket, botConfiguration);// botConfiguration \u4e5f\u53ef\u7701\u7565\uff0c\u5982\u679c\u90fd\u7528\u9ed8\u8ba4\u7684\u8bdd\n\n// \u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u5668\nbot.asyncProcessor((event, raw) -> {\n    // event: Event<*>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    System.out.println("event = " + event);\n    System.out.println("raw = " + raw);\n\n    // \u26a0 \u4e0d\u8981\u5728\u4efb\u4f55\u5f02\u6b65\u51fd\u6570\u4f53\u4e2d\u8c03\u7528\u963b\u585eAPI\u3002\n    // \u4f8b\u5982\uff1abot.getMe(),  xxxBlocking\u7b49\u3002\n    // \u4efb\u4f55\u6709 xxxAsync \u7b49\u4ef7\u66ff\u4ee3\u7684\u51fd\u6570\u90fd\u662f\u963b\u585e\u51fd\u6570\u3002\n    \n   // \u5047\u8bbe\u6709\u4e2a\u5f02\u6b65\u4efb\u52a1\uff0c\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u7ed3\u679c\n    return CompletableFuture.completedFuture(null);\n});\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7684 extra \u8ba2\u9605\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u7684\u4e8b\u4ef6\nbot.asyncProcessor(TextExtra.class, (event, raw) -> {\n    // event: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    System.out.println("event = " + event);\n    System.out.println("event.getExtra() = " + event.getExtra());\n    System.out.println("raw = " + raw);\n\n    // \u5047\u8bbe\u6709\u4e2a\u5f02\u6b65\u4efb\u52a1\uff0c\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u7ed3\u679c\n    return CompletableFuture.completedFuture(null);\n});\n\n// \u4e5f\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u7c7b\u578b Event.Type \u7684\u67d0\u4e2a\u503c\u8ba2\u9605\u4e0e\u4e4b\u5339\u914d\u7684\u4e8b\u4ef6\nbot.asyncProcessor(Event.Type.KMARKDOWN, (event, raw) -> {\n    // event: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002this.event \u4e0e Type \u53c2\u6570\u5339\u914d\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    System.out.println("event = " + event);\n    System.out.println("event.getType() = " + event.getType());\n    System.out.println("raw = " + raw);\n\n    // \u5047\u8bbe\u6709\u4e2a\u5f02\u6b65\u4efb\u52a1\uff0c\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u7ed3\u679c\n    return CompletableFuture.completedFuture(null);\n});\n\n// \u53ef\u4ee5\u67e5\u8be2bot\u81ea\u8eab\u7684\u4fe1\u606f\n// \u5982\u679c\u6709\u9700\u8981\uff0c\u8bb0\u5f97\u5904\u7406\u5f02\u5e38\nbot.getMeAsync().thenAccept(me -> {\n    // \u5f97\u5230\u7ed3\u679c\n    System.out.println("me = " + me);\n});\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 startAsync \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// \u5982\u679c\u6709\u9700\u8981\uff0c\u8bb0\u5f97\u5904\u7406\u5f02\u5e38\nbot.startAsync();\n\n// bot.asFuture() \u4f1a\u8f6c\u5316\u4e3a\u4e00\u4e2a\u6d3b\u8dc3\u7684 CompletableFuture\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\nbot.asFuture().whenComplete((unit, throwable) -> {\n    System.out.println("Bot\u88ab\u7ec8\u6b62\u4e86\u3002");\n    System.out.println("throwable: " + throwable);\n});\n')),(0,o.kt)("p",null,"\u4e00\u4e2a\u7b80\u5316\u7248\u7684\u793a\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'// \u51c6\u5907Ticket\nfinal var ticket = Ticket.botWsTicket("CLIENT_ID", "TOKEN");\n// \u6784\u5efabot\nfinal var bot = BotFactory.create(ticket);\n\n// \u8ba2\u9605\u67d0\u4e2a\u5177\u4f53\u4e8b\u4ef6\nbot.asyncProcessor(TextExtra.class, (event, raw) -> {\n    // event: Event<TextExtra>, \u4e5f\u5c31\u662f\u672c\u6b21\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\u4f53\u3002\u53ea\u6709 extra \u7684\u7c7b\u578b\u5339\u914d\u624d\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5904\u7406\u5668\n    // raw: ws\u8fde\u63a5\u63a5\u6536\u5230\u7684\u539f\u59cb\u4e8b\u4ef6\u7684JSON\u5b57\u7b26\u4e32\n    System.out.println("event = " + event);\n    System.out.println("event.getExtra() = " + event.getExtra());\n    System.out.println("raw = " + raw);\n\n    // \u5047\u8bbe\u6709\u4e2a\u5f02\u6b65\u4efb\u52a1\uff0c\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u7ed3\u679c\n    // \u26a0 \u4e0d\u8981\u5728\u4efb\u4f55\u5f02\u6b65\u51fd\u6570\u4f53\u4e2d\u8c03\u7528\u963b\u585eAPI\u3002\n    // \u4f8b\u5982\uff1abot.getMe(),  xxxBlocking\u7b49\u3002\n    // \u4efb\u4f55\u6709 xxxAsync \u7b49\u4ef7\u66ff\u4ee3\u7684\u51fd\u6570\u90fd\u662f\u963b\u585e\u51fd\u6570\u3002\n    return CompletableFuture.completedFuture(null);\n});\n\n// \u542f\u52a8BOT\u3002\u8c03\u7528 startAsync \u6216\u5176\u4ed6\u884d\u751f\u51fd\u6570 bot \u624d\u4f1a\u5f00\u59cb\u8fde\u63a5\u5230 KOOK \u670d\u52a1\u5668\u5e76\u8ba2\u9605\u6d88\u606f\u3002\n// bot.asFuture() \u4f1a\u8f6c\u5316\u4e3a\u4e00\u4e2a\u6d3b\u8dc3\u7684 CompletableFuture\uff0c\u76f4\u5230 bot \u88ab\u5173\u95ed\uff0c\u4f8b\u5982\u5728\u67d0\u5904\u8c03\u7528 bot.close() \u6216 bot\u4e2d\u7684\u7236Job\u88ab\u5173\u95ed\nbot.startAsync().thenCompose(unit -> bot.asFuture()).whenComplete((unit, throwable) -> {\n    System.out.println("Bot\u88ab\u7ec8\u6b62\u4e86\u3002");\n    System.out.println("throwable: " + throwable);\n});\n')))),(0,o.kt)("h3",{id:"\u4f7f\u7528bot\u8bf7\u6c42api"},"\u4f7f\u7528BOT\u8bf7\u6c42API"),(0,o.kt)("p",null,"\u5728\u6807\u51c6\u5e93\u4e2d\uff0c\u6211\u4eec\u4e5f\u9488\u5bf9 ",(0,o.kt)("inlineCode",{parentName:"p"},"Bot")," \u63d0\u4f9b\u4e86\u4e00\u4e9b\u7528\u4e8e\u8bf7\u6c42API\u7684\u4fbf\u6377\u65b9\u6cd5\uff0c\u514d\u9664\u4f60\u6bcf\u6b21\u90fd\u9700\u8981\u63d0\u4f9b ",(0,o.kt)("inlineCode",{parentName:"p"},"HttpClient")," \u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"authorization")," \u7684\u95ee\u9898\u3002"),(0,o.kt)("p",null,"\u4ee5",(0,o.kt)("strong",{parentName:"p"},"\u83b7\u53d6\u9891\u9053\u670d\u52a1\u5668\u5217\u8868API"),"\u4e3a\u4f8b\uff1a"),(0,o.kt)(r.Z,{groupId:"code",mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"Kotlin",attributes:{"data-value":"Kotlin"},mdxType:"TabItem"},(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u7701\u7565\u914d\u7f6e\u8fc7\u7a0b\uff0cKotlin\u5404\u5e73\u53f0\u7684\u4f7f\u7528\u65b9\u5f0f\u662f\u4e00\u81f4\u7684\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin"},'// \u6784\u5efabot\nval bot = BotFactory.create(Ticket.botWsTicket(clientId = "CLIENT_ID", token = "TOKEN")) {\n    // \u914d\u7f6e\u8fc7\u7a0b\u7701\u7565\n}\n\n// \u83b7\u53d6\u9891\u9053\u5217\u8868API\nval api = GetGuildListApi.create()\n\n// \u901a\u8fc7 bot \u8bf7\u6c42\nval dataList = api.requestBy(bot)\n\ndataList.forEach { println("guild: $it") }\n'))),(0,o.kt)(i.Z,{value:"Java",attributes:{"data-value":"Java"},mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'// \u51c6\u5907Ticket\nfinal var ticket = Ticket.botWsTicket("CLIENT_ID", "TOKEN");\n\n// \u914d\u7f6e\u8fc7\u7a0b\u7701\u7565...\n\n// \u6784\u5efabot\nfinal var bot = BotFactory.create(ticket);\n\n// \u6784\u5efaapi\nfinal var api = GetGuildListApi.create();\n\n// \u8bf7\u6c42\u5e76\u5f97\u5230\u7ed3\u679c\nfinal var listData = api.requestByBlocking(bot);\n\nfor (SimpleGuild guild : listData) {\n    System.out.println("guild = " + guild);\n}\n'))),(0,o.kt)(i.Z,{value:"Java Async",attributes:{"data-value":"Java"},mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'// \u51c6\u5907Ticket\nfinal var ticket = Ticket.botWsTicket("CLIENT_ID", "TOKEN");\n\n// \u914d\u7f6e\u8fc7\u7a0b\u7701\u7565...\n\n// \u6784\u5efabot\nfinal var bot = BotFactory.create(ticket);\n\n// \u6784\u5efaapi\nfinal var api = GetGuildListApi.create();\n\n// \u8bf7\u6c42\u5e76\u5f97\u5230\u7ed3\u679c\napi.requestByAsync(bot).thenAccept(listData -> {\n    for (SimpleGuild guild : listData) {\n        System.out.println("guild = " + guild);\n    }\n});\n')))))}v.isMDXComponent=!0},2965:t=>{t.exports=JSON.parse('{"i":"3.2.0.0-alpha.8"}')}}]);